<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EU Horse Trailer Calculator</title>
    <meta content="Professional horse trailer towing calculator with EU regulations" name="description">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #FF9800;
            --warning: #f44336;
        }
        .hero {
            background: linear-gradient(45deg, #2E7D32, #4CAF50);
            color: white;
            padding: 4rem 1rem;
            margin-top: 70px;
        }
        .calculator-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin: 2rem 0;
        }
        .input-mode {
            margin: 1rem 0;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 4px;
        }

        .w3-tooltip {
            position: relative;
        }
        .w3-tooltip .w3-text {
            visibility: hidden;
            width: 200px;
            background: var(--primary);
            color: white;
            padding: 5px;
            border-radius: 4px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
        }

        .w3-tooltip:hover .w3-text {
            visibility: visible;
        }
        .highlight-license {
            background: #fff9c4 !important;
            font-weight: bold;
        }

        .country-note {
            border-left: 4px solid #2196F3;
            margin: 1rem 0;
            padding: 0.5rem 1rem;
        }

        .eu-directive {
            background: #e8f5e9;
            border: 1px solid #4CAF50;
            padding: 1rem;
            margin: 1rem 0;
        }

        .accordion {
            cursor: pointer;
            padding: 1rem;
            background: #f5f5f5;
            margin: 0.5rem 0;
        }

        .weight-mode {
            display: none;
        }

        .active-mode {
            display: table-row;
        }

        .country-group {
            border: 1px solid #ddd;
            margin: 10px 0;
            padding: 10px;
            column-count: 2;
        }

        .regulation-category {
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            break-inside: avoid;
        }

        .regulation-list {
            list-style-type: none;
            padding-left: 20px;
        }

        .country-checkbox {
            margin: 5px 10px;
            display: block;
        }

        .climate-zone {
            border-left: 4px solid #4CAF50;
            padding: 5px 10px;
            margin: 5px 0;
        }

        @media (max-width: 600px) {
            .country-group {
                column-count: 1;
            }
        }
    </style>
</head>
<body class="w3-theme-light">

<div class="w3-top">
    <div class="w3-bar w3-card" style="background: var(--primary)">
        <a class="w3-bar-item w3-button w3-large" href="#">
            <i class="fas fa-horse"></i> EU Horse Trailer Calculator
        </a>
    </div>
</div>

<header class="hero w3-center">
    <h1 class="w3-xxxlarge">EU Horse Trailer Calculator</h1>
    <p class="w3-large">With country-specific regulations (Directive 2006/126/CE)</p>
</header>

<main class="w3-container">
    <div class="calculator-card">
        <h2 class="w3-text-theme"><i class="fas fa-flag"></i> Country-Specific Regulations</h2>

        <div class="w3-panel w3-pale-blue">
            <h4>Select Countries to Travel Through:</h4>
            <div class="country-group">
                <h5>Western Europe</h5>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="france"> France</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="germany"> Germany</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="netherlands"> Netherlands</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="belgium"> Belgium</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="luxembourg">
                    Luxembourg</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="ireland"> Ireland</label>
            </div>

            <div class="country-group">
                <h5>Southern Europe</h5>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="italy"> Italy</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="spain"> Spain</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="portugal">
                    Portugal</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="greece"> Greece</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="cyprus"> Cyprus</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="malta"> Malta</label>
            </div>

            <div class="country-group">
                <h5>Central Europe</h5>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="austria"> Austria</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="switzerland"> Switzerland</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="czech"> Czech
                    Republic</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="hungary"> Hungary</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="poland"> Poland</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="slovakia">
                    Slovakia</label>
            </div>

            <div class="country-group">
                <h5>Nordic Countries</h5>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="denmark"> Denmark</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="sweden"> Sweden</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="finland"> Finland</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="norway"> Norway</label>
            </div>

            <div class="country-group">
                <h5>Eastern Europe</h5>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="estonia"> Estonia</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="latvia"> Latvia</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="lithuania">
                    Lithuania</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="romania"> Romania</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="bulgaria">
                    Bulgaria</label>
                <label class="country-checkbox"><input name="countries" type="checkbox" value="croatia"> Croatia</label>
            </div>
        </div>

        <div class="w3-hide" id="countryRegulations">
            <h4>Selected Country Regulations:</h4>
            <div id="regulationDetails"></div>
        </div>

        <h2 class="w3-text-theme"><i class="fas fa-calculator"></i> Vehicle Specifications</h2>
        <div class="w3-row-padding">
            <div class="w3-twothird">
                <form id="calcForm">
                    <div class="input-mode w3-center">
                        <label class="w3-radio">
                            <input checked name="inputMode" onclick="toggleInputMode('quantity')" type="radio"
                                   value="quantity">
                            <span class="w3-tooltip">Quantity Mode
                                <span class="w3-text w3-tag">Calculate using average weights</span>
                            </span>
                        </label>
                        <label class="w3-radio">
                            <input name="inputMode" onclick="toggleInputMode('weight')" type="radio" value="weight">
                            <span class="w3-tooltip">Weight Mode
                                <span class="w3-text w3-tag">Enter exact weights manually</span>
                            </span>
                        </label>
                    </div>

                    <table class="w3-table w3-bordered">
                        <tr>
                            <th></th>
                            <th><span class="w3-tooltip">Towing Vehicle<span class="w3-text">The vehicle pulling the trailer</span></span>
                            </th>
                            <th><span class="w3-tooltip">Trailer<span
                                    class="w3-text">Horse transport unit being towed</span></span></th>
                        </tr>
                        <tr>
                            <td><span class="w3-tooltip">Unladen Weight (G1)<span class="w3-text">Empty weight from documents</span></span>
                            </td>
                            <td><input class="w3-input" id="g1Vehicle" required type="number"></td>
                            <td><input class="w3-input" id="g1Trailer" required type="number"></td>
                        </tr>
                        <tr>
                            <td><span class="w3-tooltip">GVWR (F2)<span
                                    class="w3-text">Max authorized loaded weight</span></span></td>
                            <td><input class="w3-input" id="f2Vehicle" required type="number"></td>
                            <td><input class="w3-input" id="f2Trailer" required type="number"></td>
                        </tr>
                        <tr>
                            <td><span class="w3-tooltip">GTW (F3)<span class="w3-text">Combined max weight (vehicle + trailer)</span></span>
                            </td>
                            <td><input class="w3-input" id="f3Vehicle" required type="number"></td>
                            <td><input class="w3-input" disabled id="f3Trailer" type="number"></td>
                        </tr>
                    </table>

                    <h4 class="w3-text-theme" style="margin-top:32px">Load Details</h4>
                    <table class="w3-table w3-bordered">
                        <tr class="active-mode" id="quantityHuman">
                            <td><span class="w3-tooltip">Human Passengers<span class="w3-text">Number of people (avg 75kg each)</span></span>
                            </td>
                            <td><input class="w3-input" id="qHumansVehicle" type="number" value="0"></td>
                            <td><input class="w3-input" id="qHumansTrailer" type="number" value="0"></td>
                        </tr>
                        <tr class="active-mode" id="quantityHorse">
                            <td><span class="w3-tooltip">Horses<span class="w3-text">Number of horses (avg 500kg each +25% safety)</span></span>
                            </td>
                            <td><input class="w3-input" disabled type="number" value="0"></td>
                            <td><input class="w3-input" id="qHorsesTrailer" type="number" value="0"></td>
                        </tr>

                        <tr class="weight-mode" id="weightHuman">
                            <td><span class="w3-tooltip">Human Weight (kg)<span class="w3-text">Total weight of all passengers</span></span>
                            </td>
                            <td><input class="w3-input" id="wHumansVehicle" type="number" value="0"></td>
                            <td><input class="w3-input" id="wHumansTrailer" type="number" value="0"></td>
                        </tr>
                        <tr class="weight-mode" id="weightHorse">
                            <td><span class="w3-tooltip">Horse Weight (kg)<span class="w3-text">Total weight including safety margin</span></span>
                            </td>
                            <td><input class="w3-input" disabled type="number" value="0"></td>
                            <td><input class="w3-input" id="wHorsesTrailer" type="number" value="0"></td>
                        </tr>

                        <tr>
                            <td><span class="w3-tooltip">Equipment (kg)<span
                                    class="w3-text">Tack, feed, and other cargo</span></span></td>
                            <td><input class="w3-input" id="equipVehicle" type="number" value="0"></td>
                            <td><input class="w3-input" id="equipTrailer" type="number" value="0"></td>
                        </tr>
                    </table>

                    <button class="w3-button w3-block w3-padding-large w3-theme w3-margin-top" onclick="calculate()"
                            type="button">
                        <i class="fas fa-play-circle"></i> Calculate Safety Check
                    </button>
                </form>
            </div>

            <div class="w3-third">
                <div class="w3-panel w3-pale-green w3-leftbar w3-border-green">
                    <h4><i class="fas fa-info-circle"></i> Calculation Notes</h4>
                    <ul class="w3-ul">
                        <li>Quantity Mode uses averages:
                            <ul>
                                <li>Human: 75kg/person</li>
                                <li>Horse: 500kg + 25% safety</li>
                            </ul>
                        </li>
                        <li>Weight Mode uses exact inputs</li>
                        <li>All values in kilograms (kg)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="calculator-card" id="results">
        <h2 class="w3-text-theme"><i class="fas fa-clipboard-check"></i> Results</h2>
        <div id="resultContent"></div>
    </div>

    <div class="calculator-card">
        <h2 class="w3-text-theme"><i class="fas fa-id-card"></i> License Requirements</h2>

        <div class="eu-directive">
            <h4><i class="fas fa-balance-scale"></i> EU Harmonization (Directive 2006/126/CE)</h4>
            <p>Categories B, B96, BE, and C1E are standardized across EU member states. National regulations may add
                additional requirements.</p>
        </div>

        <div class="accordion" onclick="toggleAccordion('countryRules')">
            <i class="fas fa-chevron-down"></i> Country-Specific Regulations
        </div>
        <div class="w3-hide" id="countryRules">
            <div class="country-note">
                <h4><i class="fas fa-flag"></i> France</h4>
                <ul>
                    <li>1.3 weight ratio rule (Article R312-3)</li>
                    <li>Strict PTAC/PTRA controls</li>
                    <li>Technical inspection required</li>
                </ul>
            </div>

            <div class="country-note">
                <h4><i class="fas fa-flag"></i> Germany</h4>
                <ul>
                    <li>No 1.3 ratio requirement</li>
                    <li>Special rules for Pferdeanhänger (horse trailers)</li>
                    <li>Mandatory breakaway systems</li>
                </ul>
            </div>

            <div class="country-note">
                <h4><i class="fas fa-flag"></i> Belgium</h4>
                <ul>
                    <li>Flexible weight ratios</li>
                    <li>Animal transport exceptions</li>
                    <li>Required safety certifications</li>
                </ul>
            </div>
        </div>

        <table class="w3-table w3-bordered w3-striped">
            <tr class="w3-theme">
                <th>Trailer GVWR</th>
                <th>Combined GVWR</th>
                <th>Required License</th>
            </tr>
            <tr id="license-B">
                <td>≤ 750kg</td>
                <td>Any</td>
                <td>B</td>
            </tr>
            <tr id="license-B-group">
                <td rowspan="3">750kg - 3500kg</td>
                <td>≤ 3500kg</td>
                <td id="license-B-inner">B</td>
            </tr>
            <tr id="license-B96">
                <td>3500kg - 4250kg</td>
                <td>B96</td>
            </tr>
            <tr id="license-BE">
                <td>> 4250kg</td>
                <td>BE</td>
            </tr>
            <tr class="w3-pale-red" id="license-C1E">
                <td>> 3500kg</td>
                <td>Any</td>
                <td>C1E</td>
            </tr>
        </table>
    </div>
</main>

<footer class="w3-container w3-theme-d3 w3-center w3-padding-32">
    <p class="w3-small">Important: Always verify with local regulations</p>
</footer>

<script>
    const countryRegulations = {
        france: {
            speed: "60-80 km/h (national roads/highways)",
            breaks: "Mandatory breaks if journey >8h",
            temperature: "No explicit limit (common sense rule applies)",
            inspection: "6 months (commercial), 2 years (private)",
            equipment: "Breast bars, secured shackles",
            weight: "1.3 weight ratio rule (Art R312-3)",
            documents: "CAPTAV required for commercial >65km",
            training: "CAPTAV certification required (commercial)",
            restrictions: "No specific restrictions",
            surveillance: "Recommended GPS for >8h journeys"
        },
        germany: {
            speed: "60 km/h (national), 80 km/h (autobahn)",
            breaks: "Every 4.5 hours",
            temperature: ">30°C prohibited without AC",
            inspection: "Annual TÜV inspection",
            equipment: "Double axles >2000kg, active ventilation",
            weight: "Strict axle weight regulations",
            documents: "Transportzulassung (commercial)",
            training: "Commercial transport certification",
            restrictions: "No transport on certain holidays",
            surveillance: "GPS mandatory for commercial"
        },
        netherlands: {
            speed: "80 km/h maximum",
            breaks: "Every 4 hours",
            temperature: ">35°C prohibited",
            inspection: "Annual APK inspection",
            equipment: "Double axles >1750kg, surveillance cameras",
            weight: "No specific ratio",
            documents: "Vervoersdocument required",
            training: "None for private transport",
            restrictions: "Night transport allowed",
            surveillance: "Cameras mandatory"
        },
        belgium: {
            speed: "90 km/h (highways)",
            breaks: "Every 6 hours",
            temperature: "No official limit",
            inspection: "Biennial inspection",
            equipment: "Standard safety equipment",
            weight: "No specific ratio",
            documents: "Basic transport documents",
            training: "None required",
            restrictions: "Night transport allowed",
            surveillance: "Recommended"
        },
        luxembourg: {
            speed: "90 km/h (highways), 75 km/h (roads)",
            breaks: "30min every 4 hours",
            temperature: "Max 32°C summer monitoring",
            inspection: "Biennial technical control",
            equipment: "Standard EU requirements",
            weight: "1.2 weight ratio recommended",
            documents: "Luxembourgish transport permit",
            training: "Basic safety certification",
            restrictions: "None",
            surveillance: "Optional"
        },
        ireland: {
            speed: "80 km/h maximum",
            breaks: "45min every 4.5h",
            temperature: "Continuous temperature monitoring",
            inspection: "Annual NCT",
            equipment: "Anti-slip flooring mandatory",
            weight: "Strict 1:1 weight ratio",
            documents: "Animal transport certificate",
            training: "IATP certification required",
            restrictions: "Ferry transport regulations apply",
            surveillance: "GPS recommended"
        },
        italy: {
            speed: "70 km/h (roads), 80 km/h (highways)",
            breaks: "Every 3.5 hours",
            temperature: "AC required >25°C",
            inspection: "Semi-annual (commercial)",
            equipment: "AC, double axles, surveillance cameras",
            weight: "No specific ratio",
            documents: "Type 1 authorization",
            training: "Basic safety certification",
            restrictions: "Summer weekend restrictions",
            surveillance: "GPS mandatory"
        },
        austria: {
            speed: "70 km/h (roads), 80 km/h (highways)",
            breaks: "45min every 4.5h",
            temperature: ">32°C prohibited",
            inspection: "Annual (§ 57a)",
            equipment: "Mountain lighting, snow chains in winter",
            weight: "No specific ratio",
            documents: "Tiertransportbescheinigung",
            training: "Mountain zone certification",
            restrictions: "Night transport prohibited",
            surveillance: "Recommended"
        },
        spain: {
            speed: "80 km/h maximum",
            breaks: "45min every 4h",
            temperature: ">35°C prohibited",
            inspection: "Annual ITV",
            equipment: "AC, 30L water tank",
            weight: "No specific ratio",
            documents: "Autonomous community authorization",
            training: "Heat management certification",
            restrictions: "12pm-5pm summer restrictions",
            surveillance: "Recommended"
        },
        portugal: {
            speed: "70 km/h (roads), 80 km/h (highways)",
            breaks: "30min every 3h",
            temperature: ">32°C prohibited",
            inspection: "Biennial",
            equipment: "Sun protection",
            weight: "No specific ratio",
            documents: "Basic transport documents",
            training: "None required",
            restrictions: "No specific restrictions",
            surveillance: "Optional"
        },
        denmark: {
            speed: "80 km/h maximum",
            breaks: "45min every 4.5h",
            temperature: ">29°C prohibited",
            inspection: "Biennial",
            equipment: "Winter tires, heating system",
            weight: "No specific ratio",
            documents: "Basic transport documents",
            training: "Winter certification",
            restrictions: "No specific restrictions",
            surveillance: "Electronic monitoring required"
        },
        sweden: {
            speed: "80 km/h maximum",
            breaks: "45min every 4.5h",
            temperature: "<-20°C prohibited",
            inspection: "Annual",
            equipment: "Reinforced insulation, heating",
            weight: "No specific ratio",
            documents: "Winter transport permit",
            training: "Arctic conditions certification",
            restrictions: "Winter-only routes",
            surveillance: "Mandatory tracking"
        }
    };


    function showCountryRegulations() {
        const selected = Array.from(document.querySelectorAll('input[name="countries"]:checked'))
            .map(c => c.value);
        let html = '';

        selected.forEach(country => {
            const rules = countryRegulations[country];
            html += `
        <div class="regulation-category">
            <h5>${country.toUpperCase()} Regulations</h5>
            <ul class="regulation-list">
                ${Object.entries(rules).map(([key, val]) => `
                <li><strong>${key.toUpperCase()}:</strong> ${val}</li>
                `).join('')}
            </ul>
        </div>`;
        });

        if (selected.length > 0) {
            document.getElementById('countryRegulations').classList.remove('w3-hide');
            document.getElementById('regulationDetails').innerHTML = html;

            // Add climate zone warnings
            const climateNotes = getClimateZoneRequirements(selected);
            if (climateNotes) {
                document.getElementById('regulationDetails').innerHTML += `
            <div class="climate-zone">
                <h5>Climate Zone Requirements</h5>
                ${climateNotes}
            </div>`;
            }
        }
    }

    function getClimateZoneRequirements(selectedCountries) {
        const zones = {
            mediterranean: ['italy', 'spain', 'portugal'],
            alpine: ['switzerland', 'austria'],
            nordic: ['denmark', 'sweden']
        };

        const required = [];
        if (selectedCountries.some(c => zones.mediterranean.includes(c))) {
            required.push("Mediterranean Zone: Sun protection, AC, 30L water tank");
        }
        if (selectedCountries.some(c => zones.alpine.includes(c))) {
            required.push("Alpine Zone: Snow chains, reinforced brakes");
        }
        if (selectedCountries.some(c => zones.nordic.includes(c))) {
            required.push("Nordic Zone: Thermal insulation, winter tires");
        }

        return required.length > 0 ?
            `<ul>${required.map(r => `<li>${r}</li>`).join('')}</ul>` :
            '';
    }

    function toggleInputMode(mode) {
        document.querySelectorAll('.active-mode, .weight-mode').forEach(e => e.style.display = 'none');
        mode === 'quantity'
            ? document.querySelectorAll('.active-mode').forEach(e => e.style.display = 'table-row')
            : document.querySelectorAll('.weight-mode').forEach(e => e.style.display = 'table-row');
    }

    function toggleAccordion(id) {
        const element = document.getElementById(id);
        element.classList.toggle('w3-hide');
    }

    function calculate() {
        const g1v = +document.getElementById('g1Vehicle').value || 0;
        const f2v = +document.getElementById('f2Vehicle').value || 0;
        const f3v = +document.getElementById('f3Vehicle').value || 0;
        const g1t = +document.getElementById('g1Trailer').value || 0;
        const f2t = +document.getElementById('f2Trailer').value || 0;
        const equipV = +document.getElementById('equipVehicle').value || 0;
        const equipT = +document.getElementById('equipTrailer').value || 0;

        const isQuantityMode = document.querySelector('input[name="inputMode"]:checked').value === 'quantity';
        let humansV, humansT, horsesT;

        if (isQuantityMode) {
            humansV = (+document.getElementById('qHumansVehicle').value || 0) * 75;
            humansT = (+document.getElementById('qHumansTrailer').value || 0) * 75;
            horsesT = (+document.getElementById('qHorsesTrailer').value || 0) * 500 * 1.25;
        } else {
            humansV = +document.getElementById('wHumansVehicle').value || 0;
            humansT = +document.getElementById('wHumansTrailer').value || 0;
            horsesT = +document.getElementById('wHorsesTrailer').value || 0;
        }

        const actualVehicle = g1v + equipV + humansV;
        const actualTrailer = g1t + equipT + humansT + horsesT;
        const combinedWeight = actualVehicle + actualTrailer;
        const combinedGVWR = f2v + f2t;

        const checks = {
            vehicleGVWR: actualVehicle <= f2v,
            trailerGVWR: actualTrailer <= f2t,
            gtw: combinedWeight <= f3v,
            ratio: actualTrailer <= (actualVehicle * 1.3)
        };

        let license = "B";
        if (f2t > 3500) license = "C1E";
        else if (f2t > 750) {
            if (combinedGVWR > 4250) license = "BE";
            else if (combinedGVWR > 3500) license = "B96";
        }

        const explanationHTML = `
    <div class="w3-panel w3-pale-blue">
        <h4><i class="fas fa-info-circle"></i> Why ${license}?</h4>
        <p>Based on EU Directive 2006/126/CE and your maximum potential weights:</p>
        <ul>
            <li>Trailer GVWR: ${f2t}kg</li>
            <li>Combined GVWR: ${f2v} + ${f2t} = ${combinedGVWR}kg</li>
        </ul>
        ${license === 'B96' ? `
        <p>Even though your current load is ${combinedWeight}kg, your setup <strong>could legally carry up to ${combinedGVWR}kg</strong>.</p>
        ` : ''}
        <p class="w3-small w3-text-grey">Note: France requires 1.3 weight ratio, Germany has special horse trailer rules.</p>
    </div>
    `;

        document.getElementById('resultContent').innerHTML = `
    <div class="w3-panel ${checks.gtw ? 'w3-pale-green' : 'w3-pale-red'}">
        <h3><i class="fas fa-balance-scale-right"></i> Weight Summary</h3>
        <p>Vehicle: ${actualVehicle.toFixed(0)}kg/${f2v}kg (${checks.vehicleGVWR ? '✅' : '❌'})</p>
        <p>Trailer: ${actualTrailer.toFixed(0)}kg/${f2t}kg (${checks.trailerGVWR ? '✅' : '❌'})</p>
        <p>Combined: ${combinedWeight.toFixed(0)}kg/${f3v}kg (${checks.gtw ? '✅' : '❌'})</p>
        <p>Weight Ratio: ${(actualTrailer / actualVehicle).toFixed(2)} (${checks.ratio ? '✅ ≤1.3' : '❌ >1.3'})</p>
    </div>
    ${explanationHTML}
    <div class="w3-panel w3-pale-blue">
        <h3><i class="fas fa-id-card-alt"></i> Required License: ${license}</h3>
    </div>
    `;

        document.querySelectorAll('#license-B, #license-B96, #license-BE, #license-C1E').forEach(row => {
            row.classList.remove('highlight-license');
        });

        if (license === 'C1E') document.getElementById('license-C1E').classList.add('highlight-license');
        else if (license === 'BE') document.getElementById('license-BE').classList.add('highlight-license');
        else if (license === 'B96') document.getElementById('license-B96').classList.add('highlight-license');
        else {
            if (f2t <= 750) document.getElementById('license-B').classList.add('highlight-license');
            else document.getElementById('license-B-inner').closest('tr').classList.add('highlight-license');
        }

        showCountryRegulations();
    }
</script>
</body>
</html>