<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Horse Trailer Calculator</title>
    <meta content="Professional horse trailer towing calculator with dual input modes" name="description">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #4CAF50;
            --secondary: #FF9800;
            --warning: #f44336;
        }
        .hero {
            background: linear-gradient(45deg, #2E7D32, #4CAF50);
            color: white;
            padding: 4rem 1rem;
            margin-top: 70px;
        }
        .calculator-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin: 2rem 0;
        }

        .input-mode {
            margin: 1rem 0;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 4px;
        }

        .tooltip {
            cursor: help;
            border-bottom: 1px dotted var(--primary);
        }

        .weight-mode {
            display: none;
        }

        .active-mode {
            display: table-row;
        }

        .w3-tooltip {
            position: relative;
        }

        .w3-tooltip .w3-text {
            visibility: hidden;
            width: 200px;
            background: var(--primary);
            color: white;
            padding: 5px;
            border-radius: 4px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
        }

        .w3-tooltip:hover .w3-text {
            visibility: visible;
        }
    </style>
</head>
<body class="w3-theme-light">

<div class="w3-top">
    <div class="w3-bar w3-card" style="background: var(--primary)">
        <a class="w3-bar-item w3-button w3-large" href="#">
            <i class="fas fa-horse"></i> Horse Trailer Calculator
        </a>
    </div>
</div>

<header class="hero w3-center">
    <h1 class="w3-xxxlarge">Horse Trailer Safety Calculator</h1>
    <p class="w3-large">Dual input mode: Quantity or Exact Weights</p>
</header>

<main class="w3-container">
    <div class="calculator-card">
        <h2 class="w3-text-theme"><i class="fas fa-calculator"></i> Vehicle Specifications</h2>

        <div class="w3-row-padding">
            <div class="w3-twothird">
                <form id="calcForm">
                    <div class="input-mode w3-center">
                        <label class="w3-radio">
                            <input checked name="inputMode" onclick="toggleInputMode('quantity')" type="radio"
                                   value="quantity">
                            <span class="tooltip">Quantity Mode</span>
                        </label>
                        <label class="w3-radio">
                            <input name="inputMode" onclick="toggleInputMode('weight')" type="radio" value="weight">
                            <span class="tooltip">Weight Mode</span>
                        </label>
                    </div>

                    <table class="w3-table w3-bordered">
                        <tr>
                            <th></th>
                            <th><span class="w3-tooltip">Towing Vehicle<span class="w3-text">The vehicle pulling the trailer</span></span>
                            </th>
                            <th><span class="w3-tooltip">Trailer<span
                                    class="w3-text">Horse transport unit being towed</span></span></th>
                        </tr>
                        <tr>
                            <td><span class="w3-tooltip">Unladen Weight (G1)<span class="w3-text">Empty weight from documents</span></span>
                            </td>
                            <td><input class="w3-input" id="g1Vehicle" required type="number"></td>
                            <td><input class="w3-input" id="g1Trailer" required type="number"></td>
                        </tr>
                        <tr>
                            <td><span class="w3-tooltip">GVWR (F2)<span
                                    class="w3-text">Max authorized loaded weight</span></span></td>
                            <td><input class="w3-input" id="f2Vehicle" required type="number"></td>
                            <td><input class="w3-input" id="f2Trailer" required type="number"></td>
                        </tr>
                        <tr>
                            <td><span class="w3-tooltip">GTW (F3)<span class="w3-text">Combined max weight (vehicle + trailer)</span></span>
                            </td>
                            <td><input class="w3-input" id="f3Vehicle" required type="number"></td>
                            <td><input class="w3-input" disabled id="f3Trailer" type="number"></td>
                        </tr>
                    </table>

                    <h4 class="w3-text-theme" style="margin-top:32px">Load Details</h4>
                    <table class="w3-table w3-bordered">
                        <tr class="active-mode" id="quantityHuman">
                            <td><span class="w3-tooltip">Human Passengers<span class="w3-text">Number of people (avg 75kg each)</span></span>
                            </td>
                            <td><input class="w3-input" id="qHumansVehicle" type="number" value="0"></td>
                            <td><input class="w3-input" id="qHumansTrailer" type="number" value="0"></td>
                        </tr>
                        <tr class="active-mode" id="quantityHorse">
                            <td><span class="w3-tooltip">Horses<span class="w3-text">Number of horses (avg 500kg each +25% safety)</span></span>
                            </td>
                            <td><input class="w3-input" disabled type="number" value="0"></td>
                            <td><input class="w3-input" id="qHorsesTrailer" type="number" value="0"></td>
                        </tr>

                        <tr class="weight-mode" id="weightHuman">
                            <td><span class="w3-tooltip">Human Weight (kg)<span class="w3-text">Total weight of all passengers</span></span>
                            </td>
                            <td><input class="w3-input" id="wHumansVehicle" type="number" value="0"></td>
                            <td><input class="w3-input" id="wHumansTrailer" type="number" value="0"></td>
                        </tr>
                        <tr class="weight-mode" id="weightHorse">
                            <td><span class="w3-tooltip">Horse Weight (kg)<span class="w3-text">Total weight including safety margin</span></span>
                            </td>
                            <td><input class="w3-input" disabled type="number" value="0"></td>
                            <td><input class="w3-input" id="wHorsesTrailer" type="number" value="0"></td>
                        </tr>

                        <tr>
                            <td><span class="w3-tooltip">Equipment (kg)<span
                                    class="w3-text">Tack, feed, and other cargo</span></span></td>
                            <td><input class="w3-input" id="equipVehicle" type="number" value="0"></td>
                            <td><input class="w3-input" id="equipTrailer" type="number" value="0"></td>
                        </tr>
                    </table>

                    <button class="w3-button w3-block w3-padding-large w3-theme w3-margin-top" onclick="calculate()"
                            type="button">
                        <i class="fas fa-play-circle"></i> Calculate Safety Check
                    </button>
                </form>
            </div>

            <div class="w3-third">
                <div class="w3-panel w3-pale-green w3-leftbar w3-border-green">
                    <h4><i class="fas fa-info-circle"></i> Calculation Notes</h4>
                    <ul class="w3-ul">
                        <li>Quantity Mode uses averages:
                            <ul>
                                <li>Human: 75kg/person</li>
                                <li>Horse: 500kg + 25% safety</li>
                            </ul>
                        </li>
                        <li>Weight Mode uses exact inputs</li>
                        <li>All values in kilograms (kg)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="calculator-card" id="results">
        <h2 class="w3-text-theme"><i class="fas fa-clipboard-check"></i> Results</h2>
        <div id="resultContent"></div>
    </div>

    <div class="calculator-card">
        <h2 class="w3-text-theme"><i class="fas fa-id-card"></i> License Requirements</h2>
        <table class="w3-table w3-bordered w3-striped">
            <tr class="w3-theme">
                <th>Trailer GVWR</th>
                <th>Combined GVWR</th>
                <th>Required License</th>
            </tr>
            <tr>
                <td>≤ 750kg</td>
                <td>Any</td>
                <td>B</td>
            </tr>
            <tr>
                <td rowspan="3">750kg - 3500kg</td>
                <td>≤ 3500kg</td>
                <td>B</td>
            </tr>
            <tr>
                <td>3500kg - 4250kg</td>
                <td>B96</td>
            </tr>
            <tr>
                <td>> 4250kg</td>
                <td>BE</td>
            </tr>
            <tr class="w3-pale-red">
                <td>> 3500kg</td>
                <td>Any</td>
                <td>C1E</td>
            </tr>
        </table>
    </div>
</main>

<footer class="w3-container w3-theme-d3 w3-center w3-padding-32">
    <p class="w3-small">Important: Verify with official specifications and regulations</p>
</footer>

<script>
    function toggleInputMode(mode) {
        document.querySelectorAll('.active-mode, .weight-mode').forEach(e => e.style.display = 'none');
        mode === 'quantity'
            ? document.querySelectorAll('.active-mode').forEach(e => e.style.display = 'table-row')
            : document.querySelectorAll('.weight-mode').forEach(e => e.style.display = 'table-row');
    }

    function calculate() {
        const g1v = +document.getElementById('g1Vehicle').value || 0;
        const f2v = +document.getElementById('f2Vehicle').value || 0;
        const f3v = +document.getElementById('f3Vehicle').value || 0;
        const g1t = +document.getElementById('g1Trailer').value || 0;
        const f2t = +document.getElementById('f2Trailer').value || 0;
        const equipV = +document.getElementById('equipVehicle').value || 0;
        const equipT = +document.getElementById('equipTrailer').value || 0;

        const isQuantityMode = document.querySelector('input[name="inputMode"]:checked').value === 'quantity';
        let humansV, humansT, horsesT;

        if (isQuantityMode) {
            humansV = (+document.getElementById('qHumansVehicle').value || 0) * 75;
            humansT = (+document.getElementById('qHumansTrailer').value || 0) * 75;
            horsesT = (+document.getElementById('qHorsesTrailer').value || 0) * 500 * 1.25;
        } else {
            humansV = +document.getElementById('wHumansVehicle').value || 0;
            humansT = +document.getElementById('wHumansTrailer').value || 0;
            horsesT = +document.getElementById('wHorsesTrailer').value || 0;
        }

        const actualVehicle = g1v + equipV + humansV;
        const actualTrailer = g1t + equipT + humansT + horsesT;
        const combinedWeight = actualVehicle + actualTrailer;

        // Regulatory checks
        const checks = {
            vehicleGVWR: actualVehicle <= f2v,
            trailerGVWR: actualTrailer <= f2t,
            gtw: combinedWeight <= f3v,
            ratio: actualTrailer <= (actualVehicle * 1.3)
        };

        // License determination
        let license = "B";
        if (f2t > 3500) license = "C1E";
        else if (f2t > 750) {
            const totalGVWR = f2v + f2t;
            if (totalGVWR > 4250) license = "BE";
            else if (totalGVWR > 3500) license = "B96";
        }

        document.getElementById('resultContent').innerHTML = `
        <div class="w3-panel ${checks.gtw ? 'w3-pale-green' : 'w3-pale-red'}">
            <h3><i class="fas fa-balance-scale-right"></i> Weight Summary</h3>
            <p>Vehicle: ${actualVehicle.toFixed(0)}kg/${f2v}kg (${checks.vehicleGVWR ? '✅' : '❌'})</p>
            <p>Trailer: ${actualTrailer.toFixed(0)}kg/${f2t}kg (${checks.trailerGVWR ? '✅' : '❌'})</p>
            <p>Combined: ${combinedWeight.toFixed(0)}kg/${f3v}kg (${checks.gtw ? '✅' : '❌'})</p>
            <p>Weight Ratio: ${(actualTrailer / actualVehicle).toFixed(2)} (${checks.ratio ? '✅ ≤1.3' : '❌ >1.3'})</p>
        </div>
        <div class="w3-panel w3-pale-blue">
            <h3><i class="fas fa-id-card-alt"></i> Required License: ${license}</h3>
        </div>
    `;
    }
</script>
</body>
</html>